# NPG Multi-Node Cluster Configuration
# @see https://github.com/uscreen/npg/blob/main/app/config.js for all available options

# Domain Configuration (REQUIRED)
NPG_DOMAIN=npg.yourdomain.com
ACME_EMAIL=admin@yourdomain.com

# Optional: Traefik Dashboard Domain
TRAEFIK_DOMAIN=traefik.yourdomain.com

# NPG Configuration
PROXY_URL=https://npg.yourdomain.com/npm

# Redis Cache Configuration (optimized for cluster)
ENABLE_REDIS_CACHE=true
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_MAX_MEMORY=1gb

# NPM Changes Polling (enabled for cache invalidation)
ENABLE_NPM_CHANGES_POLLER=true
NPM_CHANGES_POLL_INTERVAL=5000
NPM_CHANGES_BATCH_SIZE=500

# Scaling and Resource Limits
NPG_REPLICAS=3
NPG_MAX_MEMORY=1gb

# Server Configuration (defaults work for Docker networking)
# HTTP_PORT=3000
# HTTP_BIND=0.0.0.0
# LOG_LEVEL=info

# Upstream Registry Configuration (default: npmjs)
# REGISTRY_URL=https://registry.npmjs.org
# REGISTRY_POLL_URL=https://replicate.npmjs.com/registry

# Storage Configuration (shared across all NPG instances)
# STORAGE_DIR=/app/var/storage
# BLACKLIST_PATH=/app/etc/blacklist.yml
# MALWARE_LIST_DIR=/app/var/malware-list

# Redis Configuration (optional customization)
# REDIS_PASSWORD=
# REDIS_DB=0

# Malware Database Configuration (in ms, every 30 minutes)
# UPDATE_INTERVAL=1800000
